<app-base-modal [isOpen]="isOpen" (openModal)="onOpenBase()" (closeModal)="onCloseBase()" title="Transfer√™ncia"
  icon="swap_horiz">


  <section class="section-group">
    <legend>Localiza√ß√£o : Endere√ßo atual ~> {{enderecoOld}}</legend>

    <div class="form-grid">


      <div class="form-group">
        <label>Rua:</label>
        <select [(ngModel)]="rua" name="rua" required>
          <option
            *ngFor="let letra of ['A','B','C','D','E','F','G','H','I','J','K','L','M','N','O','P','Q','R','S','T','U','V','W','X','Y','Z']">
            {{ letra }}
          </option>
        </select>
      </div>

      <div class="form-group">
        <label>Bloco:</label>
        <select [(ngModel)]="bloco" name="bloco" required>
          <option>1</option>
          <option>2</option>
          <option>3</option>
          <option>4</option>
          <option>5</option>
          <option>6</option>
          <option>7</option>
          <option>8</option>
          <option>9</option>
          <option>10</option>
        </select>
      </div>

      <div class="form-group">
        <label>Apt:</label>
        <select [(ngModel)]="apt" name="apt" required>
          <option>1</option>
          <option>2</option>
          <option>3</option>
          <option>4</option>
          <option>5</option>
          <option>6</option>
          <option>7</option>
          <option>8</option>
          <option>9</option>
          <option>10</option>
        </select>
      </div>
    </div>
    <button class="icon-btn" (click)="getAddress()" style="height: 50px; border-radius: 10px; width: 100%;">üîç
      Buscar</button>


    @if (temProdutosIn === States.COMPLETE && existWTIN()) {
    <p class="merge-msg">
      J√° existe produto registrado neste endere√ßo.<br>
      Se voc√™ prosseguir, o endere√ßo ser√° marcado como 'misto', contendo m√∫ltiplos produtos.
    </p>
    }
    @else if (temProdutosIn === States.COMPLETE && !existWTIN()) {

    <p class="merge-msg-disp">Dispon√≠vel</p>
    }
  </section>

  <section class="section-group">
    <legend>Dados do Produto</legend>
    <table class="produtos-table">
      <thead>
        <tr>
          <th>C√≥digo</th>
          <!-- <th>Descri√ß√£o</th> -->
          <th>Quant.</th>
          <th>Data Fab.</th>
          <th>Sem Fab.</th>
          <th>Lote</th>
        </tr>
      </thead>
      <tbody>
        @for (item of produtos; track $index) {
        <tr [ngClass]="{
    'wt-in': item.propsPST.origem === Origem.IN,
    'wt-out': item.propsPST.origem === Origem.OUT
  }">

          <td (click)="mostrarDescricao(item)" style="cursor:pointer; text-decoration: underline;">
            {{ item.codigo }}
          </td>
          <td>{{ item.quantidade }}</td>
          <td>{{ item.dataf }}</td>
          <td>{{ item.semf }}</td>
          <td>{{ item.lote }}</td>
        </tr>
        }
      </tbody>
    </table>


    <div class="legenda">
      <span class="legenda-item wt-out">Produtos a registrar</span>
      <span class="legenda-item wt-in">Produto existente no endere√ßo</span>
    </div>
  </section>

  <section class="section-group">
    <legend>Observa√ß√µes</legend>
    <textarea rows="3" [(ngModel)]="observacao"></textarea>
  </section>

  <div class="botoes">
    <button (click)="submit()" class="btn-primary">Salvar</button>
    <button type="button" (click)="onCloseBase()">Cancelar</button>
  </div>

</app-base-modal>